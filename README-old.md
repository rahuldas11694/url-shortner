# Short URL APP
## Enable users share Long urls in short urls

Short URL App is a simple online site to generate very SHORT URLs from any given LONG URL String,
and is Powered By Laravel (v8) with Blade engine, HTML5, jquery and Bootstrap

## Modules

- Login / Register 
- Generate short URL's 
- List of all your short URL's
- Premium plans to increase your limit to generate short URL's


## Tech-stack

Short URL uses a number of open source projects to work properly:

- [Laravel] - PHP MVC framework
- [BootStrap] - the most popular CSS Framework for developing responsive and mobile-first websites
- [jQuery] - jQuery is a lightweight, "write less, do more", JavaScript library.

Find the Apps Source code at [public repository][APP_LINK] on GitHub.

## Installation

This APP requires [PHP](https://www.php.net/docs.php) v7.4+ to run.

Install the dependencies

```sh
composer update
```

To locally run the APP...

```sh
php artisan serve
```

## Schema Design for the APP
- __short_url__  - Table to store all the short urls generated by users
- __plans__ - Static Table which contains all the available membership plans
- __user_plans__ - Table to store plan assiciated with the users. At a time user can have only 1 plan
- __users__ - Table to store all users related info

```sql
CREATE TABLE `short_urls` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` bigint(20) unsigned NOT NULL,
  `og_url` varchar(5000) NOT NULL,
  `short_url` varchar(255) NOT NULL,
  `is_active` enum('0','1') NOT NULL DEFAULT '1',
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0',
  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `idx_user_id` (`user_id`) USING BTREE,
  KEY `idx_short_url` (`short_url`) USING BTREE,
  CONSTRAINT `short_urls_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`)
) ENGINE=InnoDB;
```
```sql
CREATE TABLE `plans` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `plan_name` varchar(255) NOT NULL,
  `plan_desc` varchar(500) DEFAULT NULL,
  `plan_limit` int(11) NOT NULL,
  `price` decimal(10,2) DEFAULT NULL,
  `plan_expiry_term` enum('M','Y') DEFAULT NULL,
  `is_active` enum('0','1') NOT NULL DEFAULT '1',
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0',
  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB
```

```sql
CREATE TABLE `user_plans` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` bigint(20) unsigned NOT NULL,
  `plan_id` int(11) DEFAULT NULL,
  `start_date` date NOT NULL,
  `end_date` date NOT NULL,
  `is_active` enum('0','1') NOT NULL DEFAULT '1',
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0',
  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `plan_id` (`plan_id`),
  KEY `idx_user_id` (`user_id`) USING BTREE,
  CONSTRAINT `user_plans_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`),
  CONSTRAINT `user_plans_ibfk_2` FOREIGN KEY (`plan_id`) REFERENCES `plans` (`id`)
) ENGINE=InnoDB
```

```sql
CREATE TABLE `users` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(200) COLLATE utf8mb4_unicode_ci NOT NULL,
  `email` varchar(200) COLLATE utf8mb4_unicode_ci NOT NULL,
  `email_verified_at` timestamp NULL DEFAULT NULL,
  `password` varchar(200) COLLATE utf8mb4_unicode_ci NOT NULL,
  `remember_token` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `users_email_unique` (`email`)
) ENGINE=InnoDB
```

## Tech Work Flow
# generate short url 
- when user generates new short link the entry is added to the __short_urls__ table for each users
- we first check if user has an active premius plan and the limit of creating short urls is not exceeded, if limit is exceeded then we simply do not allow user to generate any more short url

# Upgrade Plans
- User can Upgrade to any plan by jst clicking on the __Upgrade__ button
- we have 3 Plans
    - Free - user can create upto 10 short urls in a particular time period, in our case it is 1 M
    - 1000 - user can create upto 1000 short urls for a month
    - unlimited - user can create unlimited short urls for a month
    
# List ALL shortned URL's
- we list all the active and not deleted shortened url's on the page and allow users to perform 3 actions [Edit, Disable, Delete]
- Edit - this action allows user to edit the short URL to his choice of short url
- Disable - this actions allows user to disable the short url, so that this cant be accessed by anyone
-- Delete - this action allows user to delete the shortened url permenently 

   [Laravel]: <https://laravel.com/docs/8.x/readme>
   [BootStrap]: <https://getbootstrap.com/docs/5.0/getting-started/introduction/>
   [jQuery]: <http://jquery.com>
   [APP_LINK]: <git@github.com:rahuldas11694/url-shortner.git>
